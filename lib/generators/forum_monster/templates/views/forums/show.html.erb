<div class="right controls"><%= link_to t('forums.views.back_to_forums'), forums_path %></div>
<br/>
<div class="module">
  <div class="module_header">
    <%= @forum.title %>
    <span class="controls right">
      <%= link_to t('forums.views.new_topic'), new_forum_topic_path(@forum) %>
      <%= link_to t('forums.views.edit_forum'), edit_forum_path(@forum) %>
      <%= link_to t('forums.views.delete_forum'), forum_path(@forum),
      :data => {:confirm => t('confirm_deletion')}, :method => :delete %>
    </span>
  </div>
  <div>
    <table>
      <tr class="smaller">
        <th colspan="2" align="left"><%= t('activerecord.models.topic.one') %></th>
        <th><%= t('forums.views.replies') %></th>
        <th><%= t('forums.views.viewed') %></th>
        <th class="last_post" align="left"><%= t('forums.views.last_post') %></th>
      </tr>
      <% @forum.topics.each do |topic| %>
      <tr>
        <td class="icon"><%= image_tag 'ruby.png' %></td>
        <td class="description">
          <%= link_to topic.title, topic_path(topic) %>
          <% if topic.locked? %>
            <%= t('forums.views.is_locked') %>
          <% end %>
          <br />
          <span class="smaller"><%= t('forums.views.by')%> <%= topic.user.username %></span>
        </td>
        <td class="counts smaller"><%= topic.posts.size - 1 %></td>
        <td class="counts smaller"><%= topic.hits %></td>
        <td class="last_post smaller">
          <%= l(topic.posts.last.created_at, format: :default) %><br />
          <%= t('forums.views.by')%> <%= topic.posts.last.user.username %>
        </td>
      </tr>
      <% end %>
    </table>
  </div>
</div>
